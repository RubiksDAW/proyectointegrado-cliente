<ion-header>
  <ion-toolbar>
    <ion-searchbar [(ngModel)]="searchTerm"></ion-searchbar>
    <ion-buttons slot="end">
      <ion-button (click)="searchEvents()">
        <ion-icon name="search"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-card *ngFor="let event of events$ | async">
  <ng-template #defaultImage>
    <img src="https://ionicframework.com/docs/img/demos/card-media.png" />
  </ng-template>

  <ion-card-header>
    <ion-card-title *ngIf="event.ruta"
      >Localidad: {{ event.ruta.location }}
    </ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <ion-card-subtitle
      >Fecha del evento:{{
        event.fecha | date : " dd/MM/yyyy"
      }}</ion-card-subtitle
    >

    <ion-card-subtitle *ngIf="event.ruta">{{
      event.ruta.description
    }}</ion-card-subtitle>
    <ion-button (click)="setIdEvent(event._id)" (click)="checkEvent(event._id)"
      >Ver evento</ion-button
    >
    <ion-button
      *ngIf="event.creador == currentUser?.id || roles?.includes('ROLE_ADMIN')"
      (click)="deleteEvent(event._id)"
      >Borrar Evento</ion-button
    >
  </ion-card-content>
</ion-card>
